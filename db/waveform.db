##Template file waveform

record(waveform, "$(USER):WAVEFORM:0")
{
    field(PINI, "1")
    field(DTYP, "asynInt16ArrayIn")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))WAVEFORM:0")
    field(FTVL, "SHORT")
    field(NELM, "$(WAVEFORM_SIZE)")
    field(FLNK, "$(USER):SUBARRAY:0 PP")
    field(SCAN, "I/O Intr")
  }

record(subArray, "$(USER):SUBARRAY:0")
{
  field(INP, "$(USER):WAVEFORM:0.VAL")
  field(FTVL, "SHORT")
  field(MALM, "$(WAVEFORM_SIZE)")
  field(NELM, "25000")
  field(INDX, "0")
  }

record(bo, "$(USER):WEB:INIT:0")
{
    field(DTYP, "asynUInt32Digital")
    field(SCAN, "Passive")
    field(OUT, "@asynMask($(PORT), $(ADDR), 1, $(TIMEOUT))INITIALIZE0")
    field(ZNAM, "Why")
    field(ONAM, "INIT")
  }

record(longin, "$(USER):BEGIN:ADDR:0")
{
    field(DTYP, asynInt32)
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BEGIN_ADDR0")
  }

record(longin, "$(USER):END:ADDR:0")
{
    field(DTYP, "asynInt32")
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))END_ADDR0")
  }

record(longout, "$(USER):BUFFER:SIZE")
{
    field(DTYP, "asynInt32")
    field(SCAN, "Passive")
    field(OUT, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BUFFER_SIZE0")
  }

record(ao, "$(USER):WORD:COUNT:0")
{
    field(SCAN, "Passive")
    field(OUT, "$(USER):INIT:SEQ:0  PP")
  }

record(seq, "$(USER):INIT:SEQ:0")
{
    field(SCAN, "Passive")
    field(DOL1, "$(USER):WORD:COUNT:0")
    field(LNK1, "$(USER):FANOUT:BUFFER:0 PP")
    field(DO2, "1")
    field(LNK2, "$(USER):WEB:INIT:0 PP")
  }

record(dfanout, "$(USER):FANOUT:BUFFER:0")
{
    field(SCAN, "Passive")
    field(OUTA, "$(USER):BUFFER:RBV:0 PP")
    field(OUTB, "$(USER):TO:DIV:0.A PP")
    field(OUTC, "$(USER):WEB:INIT:0.A PP")
  }

record(ai, "$(USER):BUFFER:RBV:0")
{
    field(SCAN, "Passive")
  }

record(calcout, "$(USER):TO:DIV:0")
{
    field(SCAN, "Passive")
    field(CALC, "A/2")
    field(OUT, "$(USER):BUFFER:SIZE PP")
  }

#Single register for all the things

record(bo, "$(USER):RUN")
{
    field(SCAN, "Passive")
    field(DTYP, "asynUInt32Digital")
    field(OUT, "@asynMask($(PORT),$(ADDR), 1, $(TIMEOUT))RUN")
    #field(PINI, "1")
    field(ZNAM, "STOP")
    field(ONAM, "RUN")
  }



record(ao, "$(USER):STARTING:LOC:0")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))START_LOC0")
    field(PINI, "1")
}

record(ai, "$(USER):STARTING:LOC:0:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))START_LOC0")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}

record(ao, "$(USER):ENDING:LOC:0")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))END_LOC0")
    field(PINI, "1")
}

record(ai, "$(USER):ENDING:LOC:0:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))END_LOC0")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}

record(ao, "$(USER):BEAM:LOSS:LOC:0")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))BEAM_LOSS_LOC0")
    field(PINI, "1")
}

record(ai, "$(USER):BEAM:LOSS:LOC:0:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))BEAM_LOSS_LOC0")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}##Template file waveform

record(waveform, "$(USER):WAVEFORM:1")
{
    field(PINI, "1")
    field(DTYP, "asynInt16ArrayIn")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))WAVEFORM:1")
    field(FTVL, "SHORT")
    field(NELM, "$(WAVEFORM_SIZE)")
    field(FLNK, "$(USER):SUBARRAY:1 PP")
    field(SCAN, "I/O Intr")
  }

record(subArray, "$(USER):SUBARRAY:1")
{
  field(INP, "$(USER):WAVEFORM:1.VAL")
  field(FTVL, "SHORT")
  field(MALM, "$(WAVEFORM_SIZE)")
  field(NELM, "25000")
  field(INDX, "0")
  }

record(bo, "$(USER):WEB:INIT:1")
{
    field(DTYP, "asynUInt32Digital")
    field(SCAN, "Passive")
    field(OUT, "@asynMask($(PORT), $(ADDR), 1, $(TIMEOUT))INITIALIZE1")
    field(ZNAM, "Why")
    field(ONAM, "INIT")
  }

record(longin, "$(USER):BEGIN:ADDR:1")
{
    field(DTYP, asynInt32)
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BEGIN_ADDR1")
  }

record(longin, "$(USER):END:ADDR:1")
{
    field(DTYP, "asynInt32")
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))END_ADDR1")
  }

record(longout, "$(USER):BUFFER:SIZE")
{
    field(DTYP, "asynInt32")
    field(SCAN, "Passive")
    field(OUT, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BUFFER_SIZE1")
  }

record(ao, "$(USER):WORD:COUNT:1")
{
    field(SCAN, "Passive")
    field(OUT, "$(USER):INIT:SEQ:1  PP")
  }

record(seq, "$(USER):INIT:SEQ:1")
{
    field(SCAN, "Passive")
    field(DOL1, "$(USER):WORD:COUNT:1")
    field(LNK1, "$(USER):FANOUT:BUFFER:1 PP")
    field(DO2, "1")
    field(LNK2, "$(USER):WEB:INIT:1 PP")
  }

record(dfanout, "$(USER):FANOUT:BUFFER:1")
{
    field(SCAN, "Passive")
    field(OUTA, "$(USER):BUFFER:RBV:1 PP")
    field(OUTB, "$(USER):TO:DIV:1.A PP")
    field(OUTC, "$(USER):WEB:INIT:1.A PP")
  }

record(ai, "$(USER):BUFFER:RBV:1")
{
    field(SCAN, "Passive")
  }

record(calcout, "$(USER):TO:DIV:1")
{
    field(SCAN, "Passive")
    field(CALC, "A/2")
    field(OUT, "$(USER):BUFFER:SIZE PP")
  }

#Single register for all the things

record(bo, "$(USER):RUN")
{
    field(SCAN, "Passive")
    field(DTYP, "asynUInt32Digital")
    field(OUT, "@asynMask($(PORT),$(ADDR), 1, $(TIMEOUT))RUN")
    #field(PINI, "1")
    field(ZNAM, "STOP")
    field(ONAM, "RUN")
  }



record(ao, "$(USER):STARTING:LOC:1")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))START_LOC1")
    field(PINI, "1")
}

record(ai, "$(USER):STARTING:LOC:1:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))START_LOC1")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}

record(ao, "$(USER):ENDING:LOC:1")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))END_LOC1")
    field(PINI, "1")
}

record(ai, "$(USER):ENDING:LOC:1:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))END_LOC1")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}

record(ao, "$(USER):BEAM:LOSS:LOC:1")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))BEAM_LOSS_LOC1")
    field(PINI, "1")
}

record(ai, "$(USER):BEAM:LOSS:LOC:1:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))BEAM_LOSS_LOC1")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}##Template file waveform

record(waveform, "$(USER):WAVEFORM:2")
{
    field(PINI, "1")
    field(DTYP, "asynInt16ArrayIn")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))WAVEFORM:2")
    field(FTVL, "SHORT")
    field(NELM, "$(WAVEFORM_SIZE)")
    field(FLNK, "$(USER):SUBARRAY:2 PP")
    field(SCAN, "I/O Intr")
  }

record(subArray, "$(USER):SUBARRAY:2")
{
  field(INP, "$(USER):WAVEFORM:2.VAL")
  field(FTVL, "SHORT")
  field(MALM, "$(WAVEFORM_SIZE)")
  field(NELM, "25000")
  field(INDX, "0")
  }

record(bo, "$(USER):WEB:INIT:2")
{
    field(DTYP, "asynUInt32Digital")
    field(SCAN, "Passive")
    field(OUT, "@asynMask($(PORT), $(ADDR), 1, $(TIMEOUT))INITIALIZE2")
    field(ZNAM, "Why")
    field(ONAM, "INIT")
  }

record(longin, "$(USER):BEGIN:ADDR:2")
{
    field(DTYP, asynInt32)
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BEGIN_ADDR2")
  }

record(longin, "$(USER):END:ADDR:2")
{
    field(DTYP, "asynInt32")
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))END_ADDR2")
  }

record(longout, "$(USER):BUFFER:SIZE")
{
    field(DTYP, "asynInt32")
    field(SCAN, "Passive")
    field(OUT, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BUFFER_SIZE2")
  }

record(ao, "$(USER):WORD:COUNT:2")
{
    field(SCAN, "Passive")
    field(OUT, "$(USER):INIT:SEQ:2  PP")
  }

record(seq, "$(USER):INIT:SEQ:2")
{
    field(SCAN, "Passive")
    field(DOL1, "$(USER):WORD:COUNT:2")
    field(LNK1, "$(USER):FANOUT:BUFFER:2 PP")
    field(DO2, "1")
    field(LNK2, "$(USER):WEB:INIT:2 PP")
  }

record(dfanout, "$(USER):FANOUT:BUFFER:2")
{
    field(SCAN, "Passive")
    field(OUTA, "$(USER):BUFFER:RBV:2 PP")
    field(OUTB, "$(USER):TO:DIV:2.A PP")
    field(OUTC, "$(USER):WEB:INIT:2.A PP")
  }

record(ai, "$(USER):BUFFER:RBV:2")
{
    field(SCAN, "Passive")
  }

record(calcout, "$(USER):TO:DIV:2")
{
    field(SCAN, "Passive")
    field(CALC, "A/2")
    field(OUT, "$(USER):BUFFER:SIZE PP")
  }

#Single register for all the things

record(bo, "$(USER):RUN")
{
    field(SCAN, "Passive")
    field(DTYP, "asynUInt32Digital")
    field(OUT, "@asynMask($(PORT),$(ADDR), 1, $(TIMEOUT))RUN")
    #field(PINI, "1")
    field(ZNAM, "STOP")
    field(ONAM, "RUN")
  }



record(ao, "$(USER):STARTING:LOC:2")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))START_LOC2")
    field(PINI, "1")
}

record(ai, "$(USER):STARTING:LOC:2:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))START_LOC2")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}

record(ao, "$(USER):ENDING:LOC:2")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))END_LOC2")
    field(PINI, "1")
}

record(ai, "$(USER):ENDING:LOC:2:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))END_LOC2")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}

record(ao, "$(USER):BEAM:LOSS:LOC:2")
{
    field(DTYP, "asynFloat64")
    field(OUT, "@asyn($(PORT),$(ADDR),$(TIMEOUT))BEAM_LOSS_LOC2")
    field(PINI, "1")
}

record(ai, "$(USER):BEAM:LOSS:LOC:2:rbv")
{
    field(DTYP, "asynFloat64")
    field(INP, "@asyn($(PORT),$(ADDR),$(TIMEOUT))BEAM_LOSS_LOC2")
    field(PINI, "1")
    field(SCAN, "I/O Intr")
}